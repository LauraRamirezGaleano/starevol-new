## FRENCH VERSION

Voici un tutoriel Git pour pouvoir générer la documentation de STAREVOL. 


### 1. Installer Doxygen

- Sur Ubuntu : `sudo apt-get install doxygen`
- Sur Mac : `brew install doxygen`

### 2. Générer la documentation
Il suffit de lancer Doxygen avec le fichier de configuration [DoxyFilemain](DoxyFileMain) fourni. Pour cela, il faut taper la commande :
`doxygen DoxyFileMain` 

Deux dossiers vont se créer : un dossier `html` et un dossier `latex`.

### 3. Ouvrir la documentation générée 
Ouvrez avec un navigateur n'importe lequel des fichiers html générés :
`firefox html/mainpage_8doc.html`

### 4. Modifier le fichier de configuration

Vous pouvez utiliser le fichier [DoxyFilemain](DoxyFileMain) fourni tel quel ou le modifier. Les principaux champs que l'on peut modifier sont les suivants :

- Définition du projet:
`PROJECT_NAME       = "STAREVOL"`

- Choix du dossier où seront stockés les fichiers Doxygen :
`OUTPUT_DIRECTORY       = ./`

- Choix du langage :
```
EXTENSION_MAPPING       = f=FortranFixed \
                          f90=FortranFree 

``` 

- Choix du dossier de code à documenter (ici Starevol) :
`INPUT      = ../`

- Fichiers à inclure : 
```
FILE_PATTERNS       = *.f \
                      *.f90 \
                      *.doc \
                      evolcom* \
                      evolpar* \
                      eoscom* \
``` 

- Fichiers à exclure :
``` 
EXCLUDE_PATTERNS    = */BATCH/* \
                      */UTILS/*
```

- Ajout d'une image en page principale (voir 5.):
`IMAGE_PATH     = starevol.png`

- Ne pas afficher le code source sur la page de documentation :
`INLINE_SOURCES     = NO`

- Choix du maximum de noeuds montrés sur le graphe (s'il y en a plus, les fonctions sont représentées dans une boîte rouge):
`DOT_GRAPH_MAX_NODES        = 50`

### 5. Faire une page principale avec le graphe d'appels récapitulatif 

Le contenu du fichier [mainpage.doc](mainpage.doc) va être affiché en première page de la documentation. Sur ce fichier fourni en exemple il est indiqué une image [starevol.png](starevol.png) qui sera placée sur la première page. Cette image représente le graphe d'appels de la fonction *starevol* et a été générée par Doxygen. Si vous voulez la modifier vous pouvez aller dans la documentation générée et en choisir une autre. Par exemple :
1. `cp html/calcevo_8f_a91c3f6eac9f8e67d9ca16e94648e044b_cgraph.png ./calcevo.png`
2. Ouvrir [mainpage.doc](mainpage.doc) et remplacer `starevol.png` par `calcevo.png`
3. Ouvrir [DoxyFileMain](DoxyFileMain) et remplacer le champ `IMAGE_PATH` par `IMAGE_PATH     = calcevo.png`

Vous aurez le graphe d'appel de la fonction *calcevo* en première page !  


## ENGLISH VERSION

Here is a Git tutorial to generate the STAREVOL documentation. 


### 1. Install Doxygen

- On Ubuntu: `sudo apt-get install doxygen`
- On Mac: `brew install doxygen`

### 2. Generate the documentation

You just have to launch Doxygen with the configuration file [DoxyFilemain](DoxyFileMain) provided. To do this, type the command :
`doxygen DoxyFileMain` 

Two folders will be created: a `html` folder and a `latex` folder.

### 3. Open the generated documentation 

Open with a browser any of the generated html files:
`firefox html/mainpage_8doc.html`

### 4. Modify the configuration file

You can use the [DoxyFilemain](DoxyFileMain) file provided as is or modify it. The main fields that can be modified are the following:

- Project definition:
`PROJECT_NAME = "STAREVOL"`

- Choice of the folder where the Doxygen files will be stored:
`OUTPUT_DIRECTORY = ./`

- Choice of language :
```
EXTENSION_MAPPING = f=FortranFixed \
                          f90=FortranFree 


``` 

- Choice of the code folder to document (here Starevol):
`INPUT = ../`

- Files to include: 
```
FILE_PATTERNS = *.f

                      *.f90 \
                      *.doc
                      evolcom* \
                      evolpar* \
                      eoscom* \

``` 

- Files to exclude:
``` 
EXCLUDE_PATTERNS = */BATCH/* \
                      */UTILS/*

```

- Add an image to the main page (see 5.):
`IMAGE_PATH = starevol.png`

- Don't display the source code on the documentation page:
`INLINE_SOURCES = NO`

- Choice of the maximum number of nodes shown on the graph (if there are more, the functions are shown in a red box):
`DOT_GRAPH_MAX_NODES = 50`

### 5. Make a main page with the summary call graph 

The content of the file [mainpage.doc](mainpage.doc) will be displayed on the first page of the documentation. On this file provided as an example there is an image [starevol.png](starevol.png) which will be placed on the first page. This image represents the call graph of the *starevol* function and was generated by Doxygen. If you want to change it you can go to the generated documentation and choose another one. For example:

1. `cp html/calcevo_8f_a91c3f6eac9f8e67d9ca16e94648e044b_cgraph.png ./calcevo.png`
2. Open [mainpage.doc](mainpage.doc) and replace `starevol.png` with `calcevo.png`
3. Open [DoxyFileMain](DoxyFileMain) and replace the `IMAGE_PATH` field with `IMAGE_PATH     = calcevo.png`

You will have the call graph of the *calcevo* function on the front page!

